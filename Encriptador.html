<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encoder GnZlZp</title>
    <!-- <link rel="stylesheet" href="reset.css"> -->
    <link rel="stylesheet" href="style.css">
    <!-- <script type="text/javascript" src="script.js"></script> -->

</head>
<body>
    <header class="header">
        <picture>
            <img src="imagenes/Logo.png" alt="logo alura" class="logo">
        </picture>
        <h1 class="titulo">Encriptador de mensajes</h1>
    </header> 
    
    <section class="izq">  
        <div class="entrada">
            <form id="form1">
                <input type="text" id="mensaje" autocomplete="off" placeholder="Ingrese el texto deseado aquí" required>  
            </form>
            <p class="info"><span>&#128681;</span> No se admite caracteres especiales ni mayúsculas!.</p>
            <div class="botones">
                <button type="button" id="btnEncriptar" onclick="encriptar()">Encriptar</button>
                <button type="button" id="btnDesencriptar" onclick="desencriptar()">Desencriptar</button>
            </div>   
        </div>
    </section>
    <section class="der">
        <div class="salida">
            <picture>
                <img id="imagen" src="imagenes/Muñeco.png" alt="imagen_fondo" display="none">
            </picture>
            <div class="mensaje1">
               <p id="atencion">No se reconoce ningún texto</p> 
            </div>
            
            <div class="mensaje2">
               <textarea id="resultado" cols="30" rows="10" placeholder="Aquí verá el texto que desea encriptar o desencriptar" readonly></textarea> 
            </div>
            
            <div class="boton">
               <button type="button" id="btncCopiar" onclick="copiar()">Copiar</button> 
            </div>
            
        </div>
    </section>    
    
    <!-- <footer class="piePagina">  
        
        <h4>Pedro Gonzalez</h4>
        <p id="firma">Ing. electronico</p> --> 
        

    </footer>
    <script>
            function validar() {
                let expReg = /\W\B|[A-Z]/g;
                texto = document.getElementById("mensaje").value;
                cod = expReg.test(texto);
                
                if(document.getElementById("mensaje").value.trim() == "") {
                    alert("No ha introducido ningún texto");
                    return false;    
                }
                if (cod == true) {
                    alert('Evite agregar mayúsculas y/o \ncaracteres especiales como:\n´ ! " # $ % / ( ) etc');
                    return false;
                }
            }   
            function encriptar() {
                                
                if (validar() == false){
                    return;
                }
                cifrado = texto.replaceAll('e', "enter")
                .replaceAll('i', 'imes')
                .replaceAll('a', 'ai')
                .replaceAll('o', 'ober')
                .replaceAll('u', 'ufat');
                
                document.getElementById("imagen").style.display="none";
                document.getElementById("atencion").style.display="none";
                document.getElementById("resultado").innerHTML = cifrado;
                document.getElementById("mensaje").value = "";                
                
            }  
            function desencriptar() {
                
                if (validar() == false){
                    return;
                }                
                cifrado = texto.replaceAll('enter', "e")
                .replaceAll('imes', 'i')
                .replaceAll('ai', 'a')
                .replaceAll('ober', 'o')
                .replaceAll('ufat', 'u');
                
                document.getElementById("imagen").style.display="none";
                document.getElementById("atencion").style.display="none";
                document.getElementById("resultado").innerHTML = cifrado;
                document.getElementById("mensaje").value = ""; 
            }   
            function copiar(){
                contenido = document.getElementById("resultado");
                contenido.select();
                contenido.setSelectionRange(0, 99999); // For mobile devices
                navigator.clipboard.writeText(contenido.value);
                alert("Se copio el texto: " + contenido.value);
                document.getElementById("mensaje").value = contenido.value;               
            }            
    </script>  
</body>
</html>